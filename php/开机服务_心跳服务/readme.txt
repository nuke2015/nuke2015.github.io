
此项目是用php脚本,改造成开机服务,
然后模拟心跳行为,用来唤醒第三方大笨重的服务,
比如,发邮件,发短信,事务批量处理等.

测试用例:
php index.php 就能唤醒心跳了,把它做成后台服务.

设置开机启动.
service heartphp start
chkconfig heartphp stop
维护
就是修改心跳目标比如:
http://127.0.0.4/mms.php
这个是发短信中心.
目前的心跳频率是1s/次,不等待直接返回.
因为mms.php发短信需要5s的时间.
用sleep只是做假设,举个例子.

关闭方法,直接kill+进程pid
或者不关闭服务.
只是暂时关闭短信服务,就直接在mms.php入口加个exit就好了.
此时可以在mms中做各种事情了,比如,短信网关故障告警.
比如,短信统计,邮件通知等.

短信发送要处理的事情是,避免一件任务,两个进程处理,如何分任务.
短信发送要处理的第二件事情是,出错重试.就是假如短信网关失败了,怎么保证业务继续进行.

锋子
2015年8月27日 17:21:38
